<ion-header>
  <ion-toolbar>
    <ion-title>
      <a [routerLink]="['/login']">
        <ion-icon name="arrow-back-outline"></ion-icon>
      </a>
      Inscription
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form #registerForm="ngForm" (submit)="onSubmit(registerForm)">
    <ion-list>
      <!-- Username input -->
      <ion-item>
        <ion-label position="floating">Nom d'utilisateur</ion-label>
        <ion-input
          inputmode="text"
          #username="ngModel"
          required="true"
          name="name"
          min="3"
          max="30"
          [(ngModel)]="user.name"
        ></ion-input>
      </ion-item>

      <!-- Error message displayed if the username is invalid -->
      <ion-item lines="none" *ngIf="username.invalid && username.touched">
        <ion-text *ngIf="username.errors.required" color="danger">
          Le nom d'utilisateur est obligatoire.
        </ion-text>
      </ion-item>
      <ion-item lines="none" *ngIf="username.model">
        <ion-text
          *ngIf="username.model.length < 3 || username.model.length > 30"
          color="danger"
        >
          Le nom d'utilisateur doit être compris entre 3 et 30 caractères.
        </ion-text>
      </ion-item>

      <!-- Password input -->
      <ion-item>
        <ion-label position="floating">Mot de passe</ion-label>
        <ion-input
          inputmode="text"
          #password="ngModel"
          required="true"
          type="password"
          name="password"
          [(ngModel)]="user.password"
        ></ion-input>
      </ion-item>

      <!-- Error message displayed if the password is invalid -->
      <ion-item lines="none" *ngIf="password.invalid && password.touched">
        <ion-text color="danger">Le mot de passe est obligatoire</ion-text>
      </ion-item>
    </ion-list>

    <div class="ion-padding">
      <!-- Submit button -->
      <ion-button
        type="submit"
        expand="block"
        [disabled]="registerForm.invalid"
      >
        S'inscrire
      </ion-button>

      <!-- Error message displayed if the login failed -->
      <ion-text color="danger" *ngIf="registerError">
        Nom d'utilisateur ou mot de passe invalides.
      </ion-text>
    </div>
  </form>
</ion-content>
